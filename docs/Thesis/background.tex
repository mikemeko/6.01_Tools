% Chapter for background.

\chapter{Background}
\label{ch:background}

In this chapter we discuss essential background information to this project.
First, we discuss the specific terminology used in this paper. Next, we discuss
previous work done that relates to this project.

\section{Technical Background}

As we are producing a new teaching tool for 6.01 in this project,
let us first discuss the scope of circuits in 6.01.

\subsection{Circuit Components}

The rudimentary circuit components used in 6.01 are resistors, operational
amplifiers (op-amps), and potentiometers (pots). In addition to these basic
parts, students may build circuits to control LEGO motors or to control
aspects of robots designed specifically for 6.01. One of the 6.01 robots is
depicted in Figure \ref{fig:robot}. The robots can be equipped with heads that
contain three parts held together by a shaft: a LEGO motor, a potentiometer, and
a plate containing two photosensors. The robot in Figure \ref{fig:robot} has a
head attached. To connect a layout to a LEGO motor, a student would use a 6-pin
connector, and to connect a layout to a robot or a robot head, a student
use an 8-pin connector.

All together, the circuit pieces that may be used in constructing protoboard
layouts in 6.01 are resistors, op-amps, pots, (6-pin) motor connectors, (8-pin)
robot connectors, and (8-pin) head connectors.

\begin{figure}
\begin{center}
\includegraphics[width=\textwidth]{Images/robot.jpeg}
\caption[6.01 robot]{One of the 6.01 robots, with a head attached.}
\label{fig:robot}
\end{center}
\end{figure}

\subsection{Circuit Schematic}

Throughout this paper, the term \textit{circuit schematic} will refer to a
drawing or a sketch of a circuit containing its components and all the
interconnections between the components drawn as wires. This is what one would
sketch on a piece of paper in the process of designing a circuit. Figure
\ref{fig:schematic} presents an example of a circuit schematic.

\begin{figure}
\begin{center}
\includegraphics[width=\textwidth]{sample_schematic-22.mps}
\caption[Sample circuit schematic]{Sample schematic of a motor angular position
controller circuit.}
\label{fig:schematic}
\end{center}
\end{figure}

\subsection{Protoboard}
\label{sec:what_is_protoboard}

Protoboards are boards on which one can quickly build and test
small circuits. They present a $2$-dimensional array of interconnected dots
in which circuit pieces and wires can be inserted. Figure
\ref{fig:physical_protoboard} presents an example of an empty physical
protoboard. In
the orientation depicted in Figure \ref{fig:physical_protoboard}, a protoboard
has $4$ groups of rows: the first $2$ rows, the next $5$ rows, the next $5$
rows, and finally the last $2$ rows. In the first and last groups, the dots on
the protoboard are interconnected horizontally. In the middle
two groups, the dots are interconnected vertically. This
interconnection scheme is depicted in Figure \ref{fig:physical_protoboard}.

\begin{figure}
\begin{center}
\includegraphics[width=\textwidth]{Images/physical_protoboard.jpg}
\caption[Protoboard]{A protoboard. In the top and bottom groups of rows,
the dots are internally interconnected horizontally.
In the middle two groups, the dots are interconnected vertically.}
\label{fig:physical_protoboard}
\end{center}
\end{figure}

\subsection{Protoboard Layout}

The protoboard layout of a given schematic is the placement of circuit pieces
and wires on a protoboard that corresponds to the schematic. This is done by
placing the appropriate pieces on the protoboard and then appropriately
interconnecting them with wires as prescribed by the schematic. As an example,
Figure \ref{fig:eg_s_to_pb} presents one possible protoboard layout
corresponding to the schematic shown in Figure \ref{fig:schematic}.

\begin{figure}
\begin{center}
\includegraphics[width=\textwidth]{Images/sample_physical_layout.jpg}
\caption[Sample protoboard layout]{Protoboard layout for the schematic shown in
Figure \ref{fig:schematic}.}
\label{fig:eg_s_to_pb}
\end{center}
\end{figure}

For each of the circuit components we are interested in, there is a corresponding
circuit piece that may be inserted into the protoboard. The one exception is that
op-amps come in pairs. That is, each op-amp circuit piece that is inserted in the
protoboard actually contains two op-amp components within it. This raises an
important design problem when laying out a schematic - the need to find a
good way to group together the op-amps in a schematic to result in a ``good''
layout. To solve this problem, the designer must have some criteria for what
makes a layout ``good.'' While there are no conclusive answers to this
question, keeping in mind that we want layouts that are easy to build,
easy to debug, and aesthetically pleasing, we could come up with the
following rules of thumb:
\begin{itemize}
\item The layout should not have any wires that cross circuit pieces.
\item The layout should have no crossing wires, especially occlusions (i.e.
crossing wires with the same orientation).
\item The layout should only have horizontal and vertical wires (i.e. no
diagonal wires).
\item The layout should have as few wires as possible.
\item The total length of wires in the layout should be as small as possible.
\end{itemize}

Given the background information discussed thus far, the goal of this project is
automatically generating a ``good'' protoboard layout from a circuit schematics.

\section{Previous Work}

Here we will discuss previous work that has been done relating to this project.
First, as our project aims to augment the quality of 6.01, we look at the
currently available infrastructure. Next, we look at what work has
been done relating to layout in general.

\subsection{CMax}

In a typical circuits lab in 6.01, students first design their circuits by
drawing schematics of the circuits on paper.
After iteratively improving their designs based on discussions with staff
members, they build their circuits on a simulation tool called Circuits Maximus
(CMax)\cite{cmax}.
With CMax, a student can lay out a circuit on a simulated protoboard, and test
the circuit to make sure that it behaves as desired. CMax provides a very fast
and safe way of debugging circuit layouts compared to debugging layouts on a
physical protoboard. Once the students are satisfied with their
observations from CMax, they build their circuits on physical protoboards and
carry out the appropriate experiments. Figure \ref{fig:cmax_sample} presents a
CMax layout of the schematic in Figure \ref{fig:schematic}.

\begin{figure}
\begin{center}
\includegraphics[width=\textwidth]{Images/sample_circuit.png}
\caption[CMax]{CMax layout for the schematic shown in Figure
\ref{fig:schematic}.}
\label{fig:cmax_sample}
\end{center}
\end{figure}

Using CMax has reduced circuit debugging time for 6.01 students.
Its introduction has made
learning circuits significantly easier for many students, especially those that
have little or no prior experience with circuits. In addition to making the lab
exercises more manageable, it provides students with a handy way to
build, analyze, and experiment with circuits at their own leisure outside of lab.

While CMax is a fantastic tool, a tool that can automate the layout process
can be even more useful. The most instructive part of the labs that students do
in the circuits
module of 6.01 is really designing the circuits in the first place, which they
currently do by drawing schematic diagrams on paper. Once they are happy with
their schematic diagrams, they proceed to laying out the corresponding circuits
with CMax. The process of laying out a schematic does not really have very much
instructive substance. This process is essentially solving a puzzle, and has
almost nothing to do with the subject matter -- designing circuits. In fact,
when the circuits get complicated and involve many pieces, translating a
schematic diagram into a protoboard layout gets to be quite challenging and
time-consuming. In these situations, students often end up with convoluted and
unpleasant layouts that are very difficult to debug in the likely case of the
circuit not behaving as expected. Not only are such layouts difficult to debug
for the students themselves, but they are also often difficult for staff
members to understand. In the best case scenario, students should have to work
out the right schematic diagram of the circuit of interest, but should not have
to produce the corresponding protoboard layouts.

With the schematic entry tool this paper introduces, a typical 6.01 circuits lab
would proceed as follows. First, as before, the students would draw schematic
diagrams of their circuits on paper. Once they have
schematic drawings they are happy with, they can directly draw their schematic
drawings on the schematic entry tool. In fact, students may proceed directly to
building the schematic drawings on the tool, bypassing the
experimentation on
paper. Once they have a schematic drawn, they can analyze it with the tool,
discuss it with staff members, and improve it easily and quickly with
the tool. When they are
satisfied with the behaviors of their schematic circuit, they can produce the
corresponding protoboard layout automatically. The automatic generation of
protoboard layouts would be
the most important advantage of this tool. They can then build the layout on a
physical protoboard and carry out experiments with it.

\subsection{Current work in automatic layout}

In my explorations, I was not able to find any tools that completely
automatically translate circuit schematics into protoboard layouts.
However, there
do exists tools that perform partially- or fully-automatic Printed Circuit
Board (PCB) layout. To my findings, most of these tools do not publish their
algorithms and, rather, keep them proprietary. Hence, I was not able to build my
work off of any existing products. In a sense, this project aims to build
something new.
